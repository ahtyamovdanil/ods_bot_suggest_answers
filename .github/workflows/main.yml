name: test workflow
on: push

jobs:
  test:
    name: test engine
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v1  
      - run: ls -la .
      - run: docker build ./engine -t engine
      - run: docker run -p 5000:5000 -d engine
      - run: sleep 5
      - run: |
          curl -X POST -H 'Content-type: application/json' --data '{"text":"посоветуйте каких-нибудь курсов по pytorch}' http://localhost:5000/api/get_messages
      